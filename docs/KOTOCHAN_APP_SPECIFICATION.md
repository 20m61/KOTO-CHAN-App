# ğŸ“± ã“ã¨ã¡ã‚ƒã‚“ãƒãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¢ãƒ—ãƒª è©³ç´°ä»•æ§˜æ›¸ãƒ»è¨­è¨ˆæ›¸

## ç›®æ¬¡
1. [æ¦‚è¦](#æ¦‚è¦)
2. [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯é¸å®š](#æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯é¸å®š)
3. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ)
4. [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ](#ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ)
5. [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ](#ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ)
6. [UI/UXè¨­è¨ˆ](#uiuxè¨­è¨ˆ)
7. [æ©Ÿèƒ½åˆ¥è©³ç´°è¨­è¨ˆ](#æ©Ÿèƒ½åˆ¥è©³ç´°è¨­è¨ˆ)
8. [ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè¨ˆç”»](#ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè¨ˆç”»)
9. [é–‹ç™ºè¨ˆç”»](#é–‹ç™ºè¨ˆç”»)

---

## æ¦‚è¦

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
- **åç§°**: ã“ã¨ã¡ã‚ƒã‚“ãƒãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¢ãƒ—ãƒª
- **å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼**: ã“ã¨ã¡ã‚ƒã‚“ï¼ˆ1æ­³ï¼‰ã¨ãã®å®¶æ—
- **ä¸»ãªç›®çš„**: 
  - 1æ­³å…ãŒå®‰å…¨ã«æ¥½ã—ã‚ã‚‹ã‚¿ãƒƒãƒæ“ä½œãƒ™ãƒ¼ã‚¹ã®Webã‚¢ãƒ—ãƒª
  - å®¶æ—ã®æ€ã„å‡ºã‚’å…±æœ‰ã—ã€èª•ç”Ÿæ—¥ã‚’ç‰¹åˆ¥ã«ç¥ã†
  - æˆé•·ã®è¨˜éŒ²ã¨å®¶æ—ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ«

### ã‚³ã‚¢ãƒãƒªãƒ¥ãƒ¼
- **å®‰å…¨æ€§**: å­ä¾›ãŒå®‰å¿ƒã—ã¦ä½¿ãˆã‚‹è¨­è¨ˆ
- **ã‚·ãƒ³ãƒ—ãƒ«ã•**: ç›´æ„Ÿçš„ã§åˆ†ã‹ã‚Šã‚„ã™ã„UI
- **æ¥½ã—ã•**: ã‚¿ãƒƒãƒã§åå¿œã™ã‚‹æ¥½ã—ã„ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³
- **è¨˜å¿µæ€§**: å®¶æ—ã®æ€ã„å‡ºã‚’å¤§åˆ‡ã«ä¿å­˜

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯é¸å®š

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
```yaml
ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯: Next.js 14 (App Router)
ç†ç”±: 
  - Vercelã¨ã®æœ€é«˜ã®ç›¸æ€§
  - SSG/ISRã«ã‚ˆã‚‹é«˜é€Ÿãªåˆå›ãƒ­ãƒ¼ãƒ‰
  - Image Optimizationã«ã‚ˆã‚‹ç”»åƒæœ€é©åŒ–
  - Built-in PWA support

è¨€èª: TypeScript 5.3+
ç†ç”±:
  - å‹å®‰å…¨æ€§ã«ã‚ˆã‚‹é–‹ç™ºåŠ¹ç‡å‘ä¸Š
  - ä¿å®ˆæ€§ã®å‘ä¸Š
  - ã‚¨ãƒ‡ã‚£ã‚¿ã‚µãƒãƒ¼ãƒˆã®å……å®Ÿ

ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°: Tailwind CSS 3.4 + CSS Modules
ç†ç”±:
  - ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã§è¿…é€Ÿãªé–‹ç™º
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼ˆæœªä½¿ç”¨CSSã®å‰Šé™¤ï¼‰
  - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå›ºæœ‰ã®ã‚¹ã‚¿ã‚¤ãƒ«ã¯CSS Modulesã§ç®¡ç†

ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³: Framer Motion 11
ç†ç”±:
  - Reactå‘ã‘ã®æœ€ã‚‚æˆç†Ÿã—ãŸã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
  - ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼å¯¾å¿œ
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

çŠ¶æ…‹ç®¡ç†: Zustand 4.5
ç†ç”±:
  - è»½é‡ã§ã‚·ãƒ³ãƒ—ãƒ«ãªAPI
  - TypeScriptå®Œå…¨å¯¾å¿œ
  - React Server Componentsã¨ã®ç›¸æ€§

éŸ³å£°å†ç”Ÿ: Howler.js 2.2
ç†ç”±:
  - ã‚¯ãƒ­ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œ
  - ãƒ¢ãƒã‚¤ãƒ«ã§ã®è‡ªå‹•å†ç”Ÿåˆ¶é™ã¸ã®å¯¾å‡¦
  - éŸ³å£°ã‚¹ãƒ—ãƒ©ã‚¤ãƒˆã‚µãƒãƒ¼ãƒˆ

ç”»åƒã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼: Embla Carousel 8
ç†ç”±:
  - è»½é‡ã§é«˜æ€§èƒ½
  - ã‚¿ãƒƒãƒã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼å®Œå…¨å¯¾å¿œ
  - Reactå‘ã‘API
```

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ»ã‚¤ãƒ³ãƒ•ãƒ©
```yaml
ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°: Vercel
ç†ç”±:
  - Next.jsã¨ã®å®Œç’§ãªçµ±åˆ
  - è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ
  - ã‚¨ãƒƒã‚¸é–¢æ•°ã«ã‚ˆã‚‹ã‚°ãƒ­ãƒ¼ãƒãƒ«é…ä¿¡
  - ç„¡æ–™æ ã§ååˆ†ãªæ€§èƒ½

ç”»åƒã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸: Vercel Blob
ç†ç”±:
  - Vercelã¨ã®ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªçµ±åˆ
  - è‡ªå‹•ç”»åƒæœ€é©åŒ–
  - CDNé…ä¿¡
  - å®¶æ—å†™çœŸã®å®‰å…¨ãªä¿å­˜

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: Vercel KV (Redis)
ç†ç”±:
  - ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã«æœ€é©
  - é«˜é€Ÿãªã‚­ãƒ¼ãƒ»ãƒãƒªãƒ¥ãƒ¼ã‚¹ãƒˆã‚¢
  - ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹å¯¾å¿œ
  - è¨­å®šæƒ…å ±ã®ä¿å­˜ã«é©åˆ‡

èªè¨¼: ã‚«ã‚¹ã‚¿ãƒ å®Ÿè£…ï¼ˆç”Ÿå¹´æœˆæ—¥ãƒ™ãƒ¼ã‚¹ï¼‰
ç†ç”±:
  - ã‚·ãƒ³ãƒ—ãƒ«ãªè¦ä»¶
  - å¤–éƒ¨èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹ä¸è¦
  - å­ä¾›ã«å„ªã—ã„è¨­è¨ˆ

åˆ†æ: Vercel Analytics
ç†ç”±:
  - ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ
  - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
```

### é–‹ç™ºãƒ„ãƒ¼ãƒ«
```yaml
ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼: pnpm 8
ç†ç”±:
  - é«˜é€Ÿãªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  - ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ã®åŠ¹ç‡çš„ãªä½¿ç”¨
  - monorepoå¯¾å¿œ

ã‚³ãƒ¼ãƒ‰å“è³ª:
  - ESLint 8 (Next.js config)
  - Prettier 3
  - Husky + lint-staged
  - Commitlint

ãƒ†ã‚¹ãƒˆ:
  - Vitest (å˜ä½“ãƒ†ã‚¹ãƒˆ)
  - Playwright (E2Eãƒ†ã‚¹ãƒˆ)
  - React Testing Library

CI/CD:
  - GitHub Actions
  - Vercelè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
  - Dependabot
```

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
```
koto-chan-app/
â”œâ”€â”€ app/                        # Next.js App Router
â”‚   â”œâ”€â”€ (routes)/              # ãƒ«ãƒ¼ãƒˆã‚°ãƒ«ãƒ¼ãƒ—
â”‚   â”‚   â”œâ”€â”€ page.tsx           # ãƒ›ãƒ¼ãƒ ç”»é¢
â”‚   â”‚   â”œâ”€â”€ sound-play/        # ãŠã¨ã‚ãã³
â”‚   â”‚   â”œâ”€â”€ drawing/           # ãŠãˆã‹ã
â”‚   â”‚   â”œâ”€â”€ album/             # ã‚¢ãƒ«ãƒãƒ 
â”‚   â”‚   â”œâ”€â”€ admin/             # ç®¡ç†ç”»é¢ï¼ˆãƒ‘ã‚¹ä¿è­·ï¼‰
â”‚   â”‚   â””â”€â”€ birthday/          # èª•ç”Ÿæ—¥ç‰¹åˆ¥ç”»é¢
â”‚   â”œâ”€â”€ api/                   # APIãƒ«ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ upload/            # ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ settings/          # è¨­å®šAPI
â”‚   â”‚   â””â”€â”€ auth/              # èªè¨¼API
â”‚   â”œâ”€â”€ layout.tsx             # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â””â”€â”€ globals.css            # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”œâ”€â”€ components/                 # å†åˆ©ç”¨å¯èƒ½ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ ui/                    # åŸºæœ¬UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ features/              # æ©Ÿèƒ½åˆ¥ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â””â”€â”€ layouts/               # ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ lib/                       # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â”‚   â”œâ”€â”€ hooks/                 # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â”œâ”€â”€ utils/                 # ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
â”‚   â””â”€â”€ constants/             # å®šæ•°å®šç¾©
â”œâ”€â”€ public/                    # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ images/               
â”‚   â”‚   â”œâ”€â”€ stamps/            # ã‚¹ã‚¿ãƒ³ãƒ—ç”»åƒ
â”‚   â”‚   â”œâ”€â”€ ui/                # UIç´ æ
â”‚   â”‚   â””â”€â”€ mockups/           # ãƒ¢ãƒƒã‚¯ã‚¢ãƒƒãƒ—ç”»åƒ
â”‚   â”œâ”€â”€ sounds/                # éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â””â”€â”€ fonts/                 # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚©ãƒ³ãƒˆ
â”œâ”€â”€ store/                     # Zustand store
â”œâ”€â”€ types/                     # TypeScriptå‹å®šç¾©
â””â”€â”€ config/                    # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ
```mermaid
graph TD
    A[ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›] --> B[React Component]
    B --> C[Zustand Store]
    C --> D[Local State]
    
    B --> E[Server Action]
    E --> F[Vercel KV]
    E --> G[Vercel Blob]
    
    F --> H[è¨­å®šãƒ‡ãƒ¼ã‚¿]
    G --> I[ç”»åƒãƒ‡ãƒ¼ã‚¿]
    
    H --> B
    I --> B
```

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ

### èªè¨¼ãƒ»èªå¯
```typescript
// lib/auth/password.ts
export const ADMIN_BIRTHDAY = "2024-06-18";

export function validateAdminAccess(inputDate: string): boolean {
  // ç”Ÿå¹´æœˆæ—¥å½¢å¼ã®æ¤œè¨¼
  const dateRegex = /^\d{4}-\d{2}-\d{2}$/;
  if (!dateRegex.test(inputDate)) return false;
  
  // å®šæ•°æ™‚é–“æ¯”è¼ƒã§ã‚¿ã‚¤ãƒŸãƒ³ã‚°æ”»æ’ƒã‚’é˜²ã
  return cryptoSafeCompare(inputDate, ADMIN_BIRTHDAY);
}

// ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
export async function createAdminSession(): Promise<string> {
  const sessionId = generateSecureToken();
  await kv.set(
    `session:${sessionId}`,
    { isAdmin: true, createdAt: Date.now() },
    { ex: 3600 } // 1æ™‚é–“ã§æœŸé™åˆ‡ã‚Œ
  );
  return sessionId;
}
```

### ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
```typescript
// next.config.js
const securityHeaders = [
  {
    key: 'X-Frame-Options',
    value: 'DENY'
  },
  {
    key: 'Content-Security-Policy',
    value: ContentSecurityPolicy.replace(/\n/g, '')
  },
  {
    key: 'X-Content-Type-Options',
    value: 'nosniff'
  }
];

const ContentSecurityPolicy = `
  default-src 'self';
  script-src 'self' 'unsafe-eval' 'unsafe-inline' vercel.live;
  style-src 'self' 'unsafe-inline';
  img-src 'self' blob: data: https:;
  font-src 'self';
  media-src 'self' blob:;
  connect-src 'self' https://vercel.live;
`;
```

### ãƒ‡ãƒ¼ã‚¿ä¿è­·
- ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ™‚ã®ã‚¦ã‚¤ãƒ«ã‚¹ã‚¹ã‚­ãƒ£ãƒ³
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—æ¤œè¨¼ï¼ˆMIME type + magic numberï¼‰
- ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚µã‚¤ã‚ºåˆ¶é™ï¼ˆ10MBï¼‰
- EXIFæƒ…å ±ã®è‡ªå‹•å‰Šé™¤ï¼ˆãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·ï¼‰

---

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### Vercel KV ã‚¹ã‚­ãƒ¼ãƒ
```typescript
// è¨­å®šæƒ…å ±
interface AppSettings {
  birthday: string;           // èª•ç”Ÿæ—¥
  childName: string;         // å­ä¾›ã®åå‰
  theme: 'default' | 'custom'; // ãƒ†ãƒ¼ãƒ
  soundEnabled: boolean;     // éŸ³å£°ON/OFF
  albumPhotos: string[];     // ã‚¢ãƒ«ãƒãƒ å†™çœŸURLä¸€è¦§
}

// ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±
interface Session {
  id: string;
  isAdmin: boolean;
  createdAt: number;
  expiresAt: number;
}

// ä½¿ç”¨çµ±è¨ˆ
interface UsageStats {
  feature: string;          // æ©Ÿèƒ½å
  count: number;           // ä½¿ç”¨å›æ•°
  lastUsed: number;        // æœ€çµ‚ä½¿ç”¨æ—¥æ™‚
}
```

### Vercel Blob æ§‹é€ 
```
/albums/
  â”œâ”€â”€ family/              # å®¶æ—å†™çœŸ
  â”‚   â”œâ”€â”€ photo1.jpg
  â”‚   â””â”€â”€ photo2.jpg
  â”œâ”€â”€ birthday/            # èª•ç”Ÿæ—¥å†™çœŸ
  â””â”€â”€ drawings/            # ãŠçµµæãä¿å­˜
      â”œâ”€â”€ 2024-01-15/
      â””â”€â”€ 2024-01-16/
```

---

## UI/UXè¨­è¨ˆ

### ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 
```typescript
// tailwind.config.ts
export default {
  theme: {
    extend: {
      colors: {
        kotochan: {
          cream: '#FFF8E7',      // èƒŒæ™¯
          brown: '#8B4513',      // ãƒ†ã‚­ã‚¹ãƒˆ
          pink: '#FFB6C1',       // ã‚¢ã‚¯ã‚»ãƒ³ãƒˆ1
          mint: '#98FB98',       // ã‚¢ã‚¯ã‚»ãƒ³ãƒˆ2
          yellow: '#FFE4B5',     // ãƒã‚¤ãƒ©ã‚¤ãƒˆ
        }
      },
      borderRadius: {
        'kotochan': '20px'      // çµ±ä¸€è§’ä¸¸
      },
      fontFamily: {
        'rounded': ['Rounded Mplus 1c', 'sans-serif']
      },
      animation: {
        'bounce-gentle': 'bounce 2s infinite',
        'wiggle': 'wiggle 1s ease-in-out infinite',
        'float': 'float 3s ease-in-out infinite'
      }
    }
  }
}
```

### ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–è¨­è¨ˆ
```scss
// ãƒ¢ãƒã‚¤ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ
.container {
  // ãƒ¢ãƒã‚¤ãƒ« (320px - 768px)
  padding: 1rem;
  
  // ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ (768px - 1024px) 
  @media (min-width: 768px) {
    padding: 2rem;
  }
  
  // ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ— (1024px+)
  @media (min-width: 1024px) {
    max-width: 1200px;
    margin: 0 auto;
  }
}
```

### ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£
- ã‚¿ãƒƒãƒã‚¿ãƒ¼ã‚²ãƒƒãƒˆæœ€å°ã‚µã‚¤ã‚º: 44x44px
- è‰²ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”: WCAG AAæº–æ‹ 
- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç„¡åŠ¹åŒ–ã‚ªãƒ—ã‚·ãƒ§ãƒ³
- ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œï¼ˆåŸºæœ¬çš„ãªaria-labelï¼‰

---

## æ©Ÿèƒ½åˆ¥è©³ç´°è¨­è¨ˆ

### 1. ãƒ›ãƒ¼ãƒ ç”»é¢
```typescript
// app/(routes)/page.tsx
export default function HomePage() {
  const { isBirthday, age } = useBirthdayInfo();
  const { settings } = useSettings();
  
  return (
    <MainLayout showBirthdayEffects={isBirthday}>
      <WelcomeMessage name={settings.childName} />
      <NavigationGrid>
        <NavButton 
          href="/sound-play" 
          icon={<SoundIcon />}
          label="ãŠã¨ã‚ãã³"
          color="pink"
        />
        <NavButton 
          href="/drawing" 
          icon={<DrawIcon />}
          label="ãŠãˆã‹ã"
          color="mint"
        />
        <NavButton 
          href="/album" 
          icon={<AlbumIcon />}
          label="ã‚¢ãƒ«ãƒãƒ "
          color="yellow"
        />
        <NavButton 
          href="/admin" 
          icon={<SettingsIcon />}
          label="ãŠã¨ãªãƒ¡ãƒ‹ãƒ¥ãƒ¼"
          color="brown"
          requiresAuth
        />
      </NavigationGrid>
    </MainLayout>
  );
}
```

### 2. ãŠã¨ã‚ãã³æ©Ÿèƒ½
```typescript
// components/features/sound-play/SoundBoard.tsx
interface SoundItem {
  id: string;
  name: string;
  icon: ReactNode;
  sound: string;
  animation: 'bounce' | 'scale' | 'rotate';
}

const sounds: SoundItem[] = [
  { id: 'dog', name: 'ã„ã¬', icon: <DogIcon />, sound: '/sounds/dog.mp3', animation: 'bounce' },
  { id: 'cat', name: 'ã­ã“', icon: <CatIcon />, sound: '/sounds/cat.mp3', animation: 'scale' },
  // ... ä»–ã®å‹•ç‰©
];

export function SoundBoard() {
  const { playSound } = useSound();
  const [activeSound, setActiveSound] = useState<string | null>(null);
  
  const handleSoundPlay = async (sound: SoundItem) => {
    setActiveSound(sound.id);
    await playSound(sound.sound);
    
    // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³çµ‚äº†å¾Œã«ãƒªã‚»ãƒƒãƒˆ
    setTimeout(() => setActiveSound(null), 1000);
  };
  
  return (
    <div className="grid grid-cols-3 gap-4 p-4">
      {sounds.map((sound) => (
        <SoundButton
          key={sound.id}
          sound={sound}
          isActive={activeSound === sound.id}
          onPlay={() => handleSoundPlay(sound)}
        />
      ))}
    </div>
  );
}
```

### 3. ãŠãˆã‹ãæ©Ÿèƒ½
```typescript
// components/features/drawing/DrawingCanvas.tsx
export function DrawingCanvas() {
  const canvasRef = useRef<HTMLCanvasElement>(null);
  const [isDrawing, setIsDrawing] = useState(false);
  const [color, setColor] = useState('#000000');
  const [lineWidth, setLineWidth] = useState(5);
  
  const startDrawing = (e: TouchEvent | MouseEvent) => {
    const canvas = canvasRef.current;
    if (!canvas) return;
    
    const ctx = canvas.getContext('2d');
    if (!ctx) return;
    
    setIsDrawing(true);
    const { x, y } = getCoordinates(e, canvas);
    ctx.beginPath();
    ctx.moveTo(x, y);
  };
  
  const draw = (e: TouchEvent | MouseEvent) => {
    if (!isDrawing) return;
    
    const canvas = canvasRef.current;
    if (!canvas) return;
    
    const ctx = canvas.getContext('2d');
    if (!ctx) return;
    
    const { x, y } = getCoordinates(e, canvas);
    ctx.lineTo(x, y);
    ctx.strokeStyle = color;
    ctx.lineWidth = lineWidth;
    ctx.lineCap = 'round';
    ctx.stroke();
  };
  
  const saveDrawing = async () => {
    const canvas = canvasRef.current;
    if (!canvas) return;
    
    const blob = await canvasToBlob(canvas);
    const fileName = `drawing_${Date.now()}.png`;
    await uploadDrawing(blob, fileName);
  };
  
  return (
    <div className="drawing-container">
      <canvas
        ref={canvasRef}
        className="touch-none"
        onTouchStart={startDrawing}
        onTouchMove={draw}
        onTouchEnd={() => setIsDrawing(false)}
        onMouseDown={startDrawing}
        onMouseMove={draw}
        onMouseUp={() => setIsDrawing(false)}
      />
      <DrawingTools
        color={color}
        onColorChange={setColor}
        lineWidth={lineWidth}
        onLineWidthChange={setLineWidth}
        onClear={() => clearCanvas(canvasRef.current)}
        onSave={saveDrawing}
      />
    </div>
  );
}
```

### 4. ã‚¢ãƒ«ãƒãƒ æ©Ÿèƒ½
```typescript
// components/features/album/PhotoAlbum.tsx
export function PhotoAlbum() {
  const { photos, isLoading } = useAlbumPhotos();
  const [emblaRef, emblaApi] = useEmblaCarousel({ 
    loop: true,
    duration: 25 
  });
  
  // è‡ªå‹•å†ç”Ÿ
  useEffect(() => {
    if (!emblaApi) return;
    
    const autoplay = setInterval(() => {
      emblaApi.scrollNext();
    }, 5000);
    
    return () => clearInterval(autoplay);
  }, [emblaApi]);
  
  // BGMå†ç”Ÿ
  useBackgroundMusic('/sounds/album-bgm.mp3', { volume: 0.3 });
  
  return (
    <div className="album-container">
      <div className="embla" ref={emblaRef}>
        <div className="embla__container">
          {photos.map((photo, index) => (
            <div className="embla__slide" key={photo.id}>
              <Image
                src={photo.url}
                alt={photo.caption || `æ€ã„å‡ºã®å†™çœŸ ${index + 1}`}
                fill
                className="object-contain"
                priority={index === 0}
              />
              {photo.caption && (
                <p className="photo-caption">{photo.caption}</p>
              )}
            </div>
          ))}
        </div>
      </div>
      <AlbumControls emblaApi={emblaApi} />
    </div>
  );
}
```

### 5. èª•ç”Ÿæ—¥æ¼”å‡º
```typescript
// components/features/birthday/BirthdayEffects.tsx
export function BirthdayEffects({ age }: { age: number }) {
  const [showCake, setShowCake] = useState(false);
  const { playSound } = useSound();
  
  useEffect(() => {
    // åˆå›è¡¨ç¤ºæ™‚ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
    setTimeout(() => setShowCake(true), 500);
    playSound('/sounds/birthday-fanfare.mp3');
  }, []);
  
  return (
    <div className="birthday-overlay">
      {/* èƒŒæ™¯ã®ã‚­ãƒ©ã‚­ãƒ©ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */}
      <Sparkles />
      
      {/* ã‚±ãƒ¼ã‚­ã¨ã‚ã†ãã */}
      <AnimatePresence>
        {showCake && (
          <motion.div
            initial={{ scale: 0, rotate: -180 }}
            animate={{ scale: 1, rotate: 0 }}
            transition={{ type: "spring", duration: 1 }}
            className="birthday-cake"
          >
            <BirthdayCake candles={age} />
          </motion.div>
        )}
      </AnimatePresence>
      
      {/* ãŠç¥ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */}
      <motion.h1
        initial={{ opacity: 0, y: 50 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ delay: 1.5 }}
        className="birthday-message"
      >
        {age}ã•ã„ ãŠã‚ã§ã¨ã†ï¼
      </motion.h1>
    </div>
  );
}
```

---

## ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè¨ˆç”»

### ç’°å¢ƒæ§‹æˆ
```yaml
é–‹ç™ºç’°å¢ƒ:
  - URL: http://localhost:3000
  - ç’°å¢ƒå¤‰æ•°: .env.local
  - ãƒ‡ãƒ¼ã‚¿: ãƒ­ãƒ¼ã‚«ãƒ«ãƒ¢ãƒƒã‚¯

ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ:
  - URL: https://kotochan-staging.vercel.app
  - ç’°å¢ƒå¤‰æ•°: Vercelç’°å¢ƒå¤‰æ•°ï¼ˆPreviewï¼‰
  - ãƒ‡ãƒ¼ã‚¿: Vercel KV/Blobï¼ˆé–‹ç™ºç”¨ï¼‰

æœ¬ç•ªç’°å¢ƒ:
  - URL: https://kotochan.vercel.app
  - ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³: https://kotochan-birthday.com
  - ç’°å¢ƒå¤‰æ•°: Vercelç’°å¢ƒå¤‰æ•°ï¼ˆProductionï¼‰
  - ãƒ‡ãƒ¼ã‚¿: Vercel KV/Blobï¼ˆæœ¬ç•ªç”¨ï¼‰
```

### CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
```yaml
# .github/workflows/ci.yml
name: CI/CD Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: pnpm/action-setup@v2
      - uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'pnpm'
      
      - run: pnpm install
      - run: pnpm lint
      - run: pnpm type-check
      - run: pnpm test
      - run: pnpm build

  e2e:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: pnpm/action-setup@v2
      - uses: actions/setup-node@v4
      
      - run: pnpm install
      - run: pnpm playwright install
      - run: pnpm e2e

  deploy:
    needs: [test, e2e]
    if: github.ref == 'refs/heads/main'
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to Vercel
        run: |
          curl -X POST https://api.vercel.com/v1/integrations/deploy/xxx
```

### ç’°å¢ƒå¤‰æ•°è¨­å®š
```bash
# Vercelç’°å¢ƒå¤‰æ•°
NEXT_PUBLIC_APP_URL=https://kotochan.vercel.app
NEXT_PUBLIC_CHILD_NAME=ã“ã¨ã¡ã‚ƒã‚“
NEXT_PUBLIC_BIRTHDAY=2024-06-18

# ã‚µãƒ¼ãƒãƒ¼å´ç’°å¢ƒå¤‰æ•°
KV_REST_API_URL=https://xxx.vercel.app
KV_REST_API_TOKEN=xxx
BLOB_READ_WRITE_TOKEN=xxx

# ç›£è¦–ãƒ»åˆ†æ
NEXT_PUBLIC_VERCEL_ANALYTICS_ID=xxx
```

---

## é–‹ç™ºè¨ˆç”»

### ãƒ•ã‚§ãƒ¼ã‚º1: åŸºç›¤æ§‹ç¯‰ï¼ˆ1é€±é–“ï¼‰
- [x] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [ ] åŸºæœ¬çš„ãªãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®š
- [ ] ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…
- [ ] å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ

### ãƒ•ã‚§ãƒ¼ã‚º2: ã‚³ã‚¢æ©Ÿèƒ½å®Ÿè£…ï¼ˆ2é€±é–“ï¼‰
- [ ] ãƒ›ãƒ¼ãƒ ç”»é¢
- [ ] ãŠã¨ã‚ãã³æ©Ÿèƒ½
- [ ] ãŠãˆã‹ãæ©Ÿèƒ½
- [ ] åŸºæœ¬çš„ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

### ãƒ•ã‚§ãƒ¼ã‚º3: æ‹¡å¼µæ©Ÿèƒ½ï¼ˆ1é€±é–“ï¼‰
- [ ] ã‚¢ãƒ«ãƒãƒ æ©Ÿèƒ½
- [ ] èª•ç”Ÿæ—¥æ¼”å‡º
- [ ] ç®¡ç†ç”»é¢ï¼ˆãƒ‘ã‚¹ä¿è­·ï¼‰

### ãƒ•ã‚§ãƒ¼ã‚º4: å“è³ªå‘ä¸Šï¼ˆ1é€±é–“ï¼‰
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- [ ] ãƒ†ã‚¹ãƒˆå®Ÿè£…
- [ ] ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£æ”¹å–„
- [ ] PWAå¯¾å¿œ

### ãƒ•ã‚§ãƒ¼ã‚º5: ãƒªãƒªãƒ¼ã‚¹æº–å‚™ï¼ˆ3æ—¥ï¼‰
- [ ] æœ¬ç•ªç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [ ] ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®š
- [ ] ç›£è¦–è¨­å®š
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™

---

## ä¿å®ˆãƒ»é‹ç”¨è¨ˆç”»

### ç›£è¦–é …ç›®
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼ˆCore Web Vitalsï¼‰
- ã‚¨ãƒ©ãƒ¼ç‡
- ä½¿ç”¨çŠ¶æ³åˆ†æ
- ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä½¿ç”¨é‡

### ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆ¦ç•¥
- ç”»åƒãƒ‡ãƒ¼ã‚¿: æ—¥æ¬¡ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
- è¨­å®šãƒ‡ãƒ¼ã‚¿: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
- ã‚³ãƒ¼ãƒ‰: Gitã«ã‚ˆã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

### ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆè¨ˆç”»
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ‘ãƒƒãƒ: å³æ™‚é©ç”¨
- æ©Ÿèƒ½è¿½åŠ : æœˆæ¬¡ãƒªãƒªãƒ¼ã‚¹
- å¤§è¦æ¨¡ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ: èª•ç”Ÿæ—¥ã«åˆã‚ã›ã¦å¹´æ¬¡

---

## ä»˜éŒ²

### æ¨å¥¨VSCodeæ‹¡å¼µæ©Ÿèƒ½
```json
{
  "recommendations": [
    "dbaeumer.vscode-eslint",
    "esbenp.prettier-vscode",
    "bradlc.vscode-tailwindcss",
    "prisma.prisma",
    "ms-playwright.playwright"
  ]
}
```

### é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †
```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/your-org/koto-chan-app.git
cd koto-chan-app

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pnpm install

# ç’°å¢ƒå¤‰æ•°è¨­å®š
cp .env.example .env.local
# .env.localã‚’ç·¨é›†

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
pnpm dev

# ãã®ä»–ã®ã‚³ãƒãƒ³ãƒ‰
pnpm build      # ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰
pnpm start      # ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒãƒ¼
pnpm lint       # Lintãƒã‚§ãƒƒã‚¯
pnpm test       # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pnpm e2e        # E2Eãƒ†ã‚¹ãƒˆ
```

---

ã“ã®ä»•æ§˜æ›¸ã¯å®šæœŸçš„ã«æ›´æ–°ã•ã‚Œã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é€²è¡Œã«å¿œã˜ã¦è©³ç´°ãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚